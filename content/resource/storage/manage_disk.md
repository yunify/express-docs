---
title: "管理硬盘"
description: 本小节主要介绍如何对云平台内的硬盘进行管理。
draft: false
weight: 4
---

## 场景描述

该任务主要用于指导用户在云平台内对已创建成功的硬盘进行管理。

## 前提条件

已获得**云平台**的登录账户和密码。


## 操作步骤

### 修改属性

1. 登录管理平台。

2. 在顶部导航栏，选择**资源** > **存储** > **硬盘**，默认进入**硬盘**列表页面。


3. 点击待修改的硬盘所在行右侧的更多操作<img src="../../_images/more_operation.png" style="zoom:50%;" />，选择**修改**，在弹出的**修改属性**的窗口中输入硬盘的新名称以及相关描述，点击**修改**即可。

   ![manage_disk_1](../../_images/manage_disk_1.png)

### 挂载/卸载硬盘

- **挂载硬盘**

1. 登录管理平台，在顶部导航栏，选择**资源** > **存储** > **硬盘**，进入**硬盘**列表页面。

2. 点击待加载至虚拟主机的硬盘所在行右侧的更多操作<img src="../../_images/more_operation.png" style="zoom:50%;" />，选择**加载硬盘到主机**，在弹出的**选择主机**的窗口中选择指定主机，点击**确定**即可。

   > **说明：**
   >
   > - 同一块硬盘可加载至不同的主机上；
   > - 若平台内主机数量过多，可在选择主机窗口的搜索框中输入关键词对主机列表进行筛选。

   ![manage_disk_2](../../_images/manage_disk_2.png)

3. 登录至硬盘所在的虚拟主机。

   > **说明：**
   >
   > - 使用`mount`命令进行物理挂载；
   > - 参考[连接主机](/resource/virtual/expresscloud/link_virtual)相关内容，登录硬盘所在虚拟主机。

4. 执行如下命令，查看磁盘设备名，其中 /dev/vdc 为新增盘。
   ```
   # lsblk -l
   NAME  MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
   vda   252:0    0   20G  0 disk
   vda1  252:1    0 19.9G  0 part /
   vda14 252:14   0    4M  0 part
   vda15 252:15   0  106M  0 part /boot/efi
   vdb   252:16   0    4G  0 disk [SWAP]
   vdc   252:32   0   20G  0 disk
   ```

5. 执行如下命令，对磁盘进行格式化。

   ```
   # mkfs.ext4 /dev/vdc
   ```
   > **说明：**
   >
   > /dev/vdc：为待格式化的磁盘盘符，需根据实际情况进行修改。

   ![manage_disk_2_1](../../_images/manage_disk_2_1.png)

6. 执行如下命令，查看格式化后磁盘的文件系统信息。
   ```
   # lsblk -f
   ```

   ![manage_disk_2_2](../../_images/manage_disk_2_2.png)

7. 执行如下命令，创建新的磁盘挂载目录。
   ```
   # mkdir /mnt/data
   ```
   > **说明：**
   >
   > /mnt/data：为新创建的磁盘挂载目录，需根据实际情况进行修改。

8. 执行如下命令，将磁盘挂载到步骤 5 创建的系统目录下。

   ```
   # mount /dev/vdc /mnt/data
   ```
   > **说明：**
   >
   > /dev/vdc：为待挂载磁盘的盘符，需根据实际情况进行修改。
   >
   > /mnt/data：为磁盘挂载的系统目录，需根据实际情况进行修改

9. 使用 `df` 命令，查看磁盘是否挂载成功.

   ```
   # df -h
   Filesystem      Size  Used Avail Use% Mounted on
   udev            2.0G     0  2.0G   0% /dev
   tmpfs           394M  672K  393M   1% /run
   /dev/vda1        20G  1.3G   18G   7% /
   tmpfs           2.0G     0  2.0G   0% /dev/shm
   tmpfs           5.0M     0  5.0M   0% /run/lock
   tmpfs           2.0G     0  2.0G   0% /sys/fs/cgroup
   /dev/vda15      105M  3.9M  101M   4% /boot/efi
   tmpfs           394M     0  394M   0% /run/user/0
   tmpfs           394M     0  394M   0% /run/user/1000
   /dev/vdc         20G   45M   19G   1% /mnt/data

- **卸载硬盘**

1. 登录虚拟主机，使用 `ummount` 命令进行物理卸载。

2. 进入**硬盘**列表页面，点击待卸载硬盘所在行右侧的更多操作<img src="../../_images/more_operation.png" style="zoom:50%;" />，选择**卸载硬盘**，在弹出的**卸载硬盘**的窗口点击**确定**即可。

   ![manage_disk_3](../../_images/manage_disk_3.png)

### 扩容硬盘

1. 登录管理平台，在顶部导航栏，选择**资源** > **存储** > **硬盘**，进入**硬盘**列表页面。

2. 点击硬盘所在行右侧的更多操作<img src="../../_images/more_operation.png" style="zoom:50%;" />，选择**扩容**，在弹出的**扩容硬盘**的窗口中，设置硬盘大小，点击**扩容**即可。

   > **注意：**
   >
   > - 为防止误操作造成数据丢失，建议扩容前先创建备份；
   > - 完成硬盘扩容后，硬盘每个分区的文件系统并未扩容，用户需要登录虚拟主机扩容相应的文件系统；
   > - 硬盘只支持单向扩容，不支持缩容。

   ![manage_disk_4](../../_images/manage_disk_4.png)

### 创建备份

1. 登录管理平台，在顶部导航栏，选择**资源** > **存储** > **硬盘**，进入**硬盘**列表页面。

2. 点击硬盘所在行右侧的更多操作<img src="../../_images/more_operation.png" style="zoom:50%;" />，选择**创建备份**，在弹出的**创建**的窗口中，输入备份名称，选择备份方式，点击**创建**即可。

   > **注意：**
   >
   > - 支持创建全量备份和增量备份。
   > - 首次创建备份的硬盘仅支持创建全量备份。
   > - 为了保证备份创建成功，正在创建备份时，用户不能修改实例状态，比如写入数据，停止或重启实例。

   ![manage_disk_5](../../_images/manage_disk_5.png)


### 绑定/解绑标签

1. 登录管理平台，在顶部导航栏，选择**资源** > **存储** > **硬盘**，进入**硬盘**列表页面。

2. 点击硬盘所在行右侧的更多操作<img src="../../_images/more_operation.png" style="zoom:50%;" />，选择 **标签**，点击**绑定**，在弹出的**绑定标签**窗口中，选择待绑定至当前镜像的标签，点击**绑定**即可。

   > **说明：**
   >
   > - 若当前平台内没有可用的标签，可参考[创建标签](/ops_tool/label/create_label)相关内容。
   > - 可绑定单个或多个标签。

   ![manage_disk_6](../../_images/manage_disk_6.png)

3. 点击硬盘所在行右侧的更多操作<img src="../../_images/more_operation.png" style="zoom:50%;" />，选择 **标签**，点击**解绑**，在弹出的**解绑标签**窗口中，删除待解绑的标签，点击**确定**即可。

   ![manage_disk_7](../../_images/manage_disk_7.png)


### 删除硬盘

1. 登录管理平台，在顶部导航栏，选择**资源** > **存储** > **硬盘**，进入**硬盘**列表页面。

2. 将硬盘从虚拟机主机上进行卸载，可参考[卸载硬盘](#挂载卸载硬盘)相关内容。

   > **注意：**
   > 
   > 只有状态为**可用**的硬盘，才可删除成功。

3. 点击硬盘所在行右侧的更多操作<img src="../../_images/more_operation.png" style="zoom:50%;" />，选择 **删除**，在弹出的**删除**窗口中，点击**删除**即可。

   > **注意：**
   > 
   > 删除后硬盘资源将在回收站保留 2 小时，请提前备份数据。

      ![manage_disk_8](../../_images/manage_disk_8.png)